<!DOCTYPE html>


  
<html itemscope itemtype="https://schema.org/WebPage" class="no-js" lang="en">

<head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://blog.ronan.us.kg/">
    <meta name="author" content="Ronan">
    <meta name="description" content="Bilberry Premium Theme for Hugo.">
    <meta name="keywords" content="blog,personal,responsive,search,font awesome,pages,posts,multilingual,syntax highlighting,premium,shortcuts">
    <meta name="generator" content="Hugo 0.136.2">
    <title>
        
           
               shell 编程 &vert; Ronan Blog
           
        
    </title>
    <meta itemprop="name" content="shell 编程">
    <meta itemprop="description" content="shell 编程 - Bilberry Premium Theme for Hugo.">
    <meta property="og:site_name" content="Ronan Blog">

    <meta property="og:url" content="https://blog.ronan.us.kg/posts/shell-%E7%BC%96%E7%A8%8B/">
  <meta property="og:site_name" content="Ronan Blog">
  <meta property="og:title" content="shell 编程">
  <meta property="og:description" content="一、运算符 1、算术运算符 下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：
运算符 说明 举例 &#43; 加法 expr $a &#43; $b 结果为 30。 - 减法 expr $a - $b 结果为 -10。 * 乘法 expr $a \* $b 结果为 200。 / 除法 expr $b / $a 结果为 2。 % 取余 expr $b % $a 结果为 0。 = 赋值 a=$b 把变量 b 的值赋给 a。 == 相等。用于比较两个数字，相同则返回 true。 [ $a ==$b ] 返回 false。 != 不相等。用于比较两个数字，不相同则返回 true。 [ $a !=$b ] 返回 true。 注意： 条件表达式要放在方括号之间，并且要有空格，例如: [​$a==$​b] 是错误的，必须写成 [ ​$a ==$​b ] 。">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-10-22T13:26:19+08:00">
    <meta property="article:modified_time" content="2024-10-22T13:26:19+08:00">


    


    

    
    <link rel="canonical" href="https://blog.ronan.us.kg/posts/shell-%E7%BC%96%E7%A8%8B/">
    

    

    



    
    <link id="theme-css" rel="stylesheet" href="https://blog.ronan.us.kg/theme.min.8125c5e195258aa61b74485a7c4accfba7efc242481cb11437cb6d93789d00e7.css" integrity="sha256-gSXF4ZUliqYbdEhafErM&#43;6fvwkJIHLEUN8ttk3idAOc=" media="screen" crossorigin="anonymous">



    



    

    
</head>

<body class="bilberry-hugo-theme">
    

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
        </ul>

        
            <div id="search-box" class="search">
                <i class="fas fa-search"></i>
                <input id="search" type="text" placeholder="Search ...">
            </div>
        
    </div>
</nav>


    
    <header>

    <a id="back-to-top-button">
        <i class="fas fa-angle-up"></i>
    </a>

    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="https://imgs.ronan.us.kg/avatar.jpg" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title">
                <a href="/">
                    Ronan Blog
                </a>
            </h3>

            
                <span class="subtitle">「向前每多走一步，热爱和勇气就会多一分。」</span>
            
        </div>
        <div class="selectors">
          
          
       </div>

        
            <div class="toggler">
        
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
    </div>
    </div>
</header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://blog.ronan.us.kg/posts/shell-%E7%BC%96%E7%A8%8B/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://blog.ronan.us.kg/posts/shell-%E7%BC%96%E7%A8%8B/">
            shell 编程
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2024-10-22</span>
            
        

        

        
            <span class="categories">
                
                    
                    
                        <a href="https://blog.ronan.us.kg/categories/linux/">Linux</a>
                    
                
            </span>
        

        
            <span class="author">
                
                
                    <a href="https://blog.ronan.us.kg/author/ronan/">Ronan</a>
                
            </span>
        
    </div>

    
        

        <h1 id="一运算符">一、运算符</h1>
<h2 id="1算术运算符">1、算术运算符</h2>
<p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">运算符</th>
          <th style="text-align: center">说明</th>
          <th style="text-align: center">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">+</td>
          <td style="text-align: center">加法</td>
          <td style="text-align: center"><code>expr $a + $b</code> 结果为 30。</td>
      </tr>
      <tr>
          <td style="text-align: center">-</td>
          <td style="text-align: center">减法</td>
          <td style="text-align: center"><code>expr $a - $b</code> 结果为 -10。</td>
      </tr>
      <tr>
          <td style="text-align: center">*</td>
          <td style="text-align: center">乘法</td>
          <td style="text-align: center"><code>expr $a \* $b</code> 结果为  200。</td>
      </tr>
      <tr>
          <td style="text-align: center">/</td>
          <td style="text-align: center">除法</td>
          <td style="text-align: center"><code>expr $b / $a</code> 结果为 2。</td>
      </tr>
      <tr>
          <td style="text-align: center">%</td>
          <td style="text-align: center">取余</td>
          <td style="text-align: center"><code>expr $b % $a</code> 结果为 0。</td>
      </tr>
      <tr>
          <td style="text-align: center">=</td>
          <td style="text-align: center">赋值</td>
          <td style="text-align: center">a=$b 把变量 b 的值赋给 a。</td>
      </tr>
      <tr>
          <td style="text-align: center">==</td>
          <td style="text-align: center">相等。用于比较两个数字，相同则返回 true。</td>
          <td style="text-align: center">[ $a ==$b ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">!=</td>
          <td style="text-align: center">不相等。用于比较两个数字，不相同则返回 true。</td>
          <td style="text-align: center">[ $a !=$b ] 返回 true。</td>
      </tr>
  </tbody>
</table>
<p><strong>注意：</strong> 条件表达式要放在方括号之间，并且要有空格，例如:  <strong>[<strong>​</strong>$a==$<strong>​</strong>b]</strong>  是错误的，必须写成  <strong>[ <strong>​</strong>$a ==$<strong>​</strong>b ]</strong> 。</p>
<ul>
<li>乘号(*)前边必须加反斜杠()才能实现乘法运算；</li>
<li>if&hellip;then&hellip;fi 是条件语句，后续将会讲解。</li>
<li>在 MAC 中 shell 的 expr 语法是： <strong>$((表达式))</strong> ，此处表达式中的 &ldquo;*&rdquo; 不需要转义符号 &ldquo;&quot; 。</li>
</ul>
<h2 id="2关系运算符">2、关系运算符</h2>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<p>下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">运算符</th>
          <th style="text-align: center">说明</th>
          <th style="text-align: center">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">-eq</td>
          <td style="text-align: center">检测两个数是否相等，相等返回 true。</td>
          <td style="text-align: center">[ $a -eq$b ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">-ne</td>
          <td style="text-align: center">检测两个数是否不相等，不相等返回 true。</td>
          <td style="text-align: center">[ $a -ne$b ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-gt</td>
          <td style="text-align: center">检测左边的数是否大于右边的，如果是，则返回 true。</td>
          <td style="text-align: center">[ $a -gt$b ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">-lt</td>
          <td style="text-align: center">检测左边的数是否小于右边的，如果是，则返回 true。</td>
          <td style="text-align: center">[ $a -lt$b ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-ge</td>
          <td style="text-align: center">检测左边的数是否大于等于右边的,如果是,则返回 true。</td>
          <td style="text-align: center">[ $a -ge$b ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">-le</td>
          <td style="text-align: center">检测左边的数是否小于等于右边的,如果是,则返回 true。</td>
          <td style="text-align: center">[ $a -le$b ] 返回 true。</td>
      </tr>
  </tbody>
</table>
<h2 id="3布尔运算符">3、布尔运算符</h2>
<p>下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">运算符</th>
          <th style="text-align: center">说明</th>
          <th style="text-align: center">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">!</td>
          <td style="text-align: center">非运算，表达式为 true 则返回 false，</td>
          <td style="text-align: center">[ ! false ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-o</td>
          <td style="text-align: center">或运算，有一个表达式为 true 则返回 true。</td>
          <td style="text-align: center">[ $a -lt 20 -o$b -gt 100 ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-a</td>
          <td style="text-align: center">与运算，两个表达式都为 true 才返回 true。</td>
          <td style="text-align: center">[ $a -lt 20 -a$b -gt 100 ] 返回 false。</td>
      </tr>
  </tbody>
</table>
<h2 id="4逻辑运算符">4、逻辑运算符</h2>
<p>以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">运算符</th>
          <th style="text-align: center">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">&amp;&amp;</td>
          <td style="text-align: center">逻辑的 AND</td>
      </tr>
      <tr>
          <td style="text-align: center">||</td>
          <td style="text-align: center">逻辑的 OR</td>
      </tr>
  </tbody>
</table>
<h2 id="5字符串运算符">5、字符串运算符</h2>
<p>下表列出了常用的字符串运算符，假定变量 a 为 &ldquo;abc&rdquo;，变量 b 为 &ldquo;efg&rdquo;：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">运算符</th>
          <th style="text-align: center">说明</th>
          <th style="text-align: center">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">=</td>
          <td style="text-align: center">检测两个字符串是否相等，相等返回 true。</td>
          <td style="text-align: center">[ $a =$b ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">!=</td>
          <td style="text-align: center">检测两个字符串是否不相等，不相等返回 true。</td>
          <td style="text-align: center">[ $a !=$b ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-z</td>
          <td style="text-align: center">检测字符串长度是否为0，为0返回 true。</td>
          <td style="text-align: center">[ -z $a ] 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: center">-n</td>
          <td style="text-align: center">检测字符串长度是否不为 0，不为 0 返回 true。</td>
          <td style="text-align: center">[ -n &ldquo;$a&rdquo; ] 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">$</td>
          <td style="text-align: center">检测字符串是否不为空，不为空返回 true。</td>
          <td style="text-align: center">[ $a ] 返回 true。</td>
      </tr>
  </tbody>
</table>
<h2 id="6文件测试运算符">6、文件测试运算符</h2>
<p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<p>属性检测描述如下：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">操作符</th>
          <th style="text-align: center">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">-b file</td>
          <td style="text-align: center">检测文件是否是块设备文件，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-c file</td>
          <td style="text-align: center">检测文件是否是字符设备文件，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-d file</td>
          <td style="text-align: center">检测文件是否是目录，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-e file</td>
          <td style="text-align: center">检测文件是否存在，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-f file</td>
          <td style="text-align: center">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-g file</td>
          <td style="text-align: center">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-k file</td>
          <td style="text-align: center">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-p file</td>
          <td style="text-align: center">检测文件是否是有名管道，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-u file</td>
          <td style="text-align: center">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: center">-r file</td>
          <td style="text-align: center">检测文件是否可读，如果是，则返回 true。</td>
      </tr>
  </tbody>
</table>
<p>其他检查符：</p>
<ul>
<li><strong>-S</strong>: 判断某文件是否 socket。</li>
<li><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</li>
</ul>
<hr>
<h1 id="二字符串处理">二、字符串处理</h1>
<h2 id="1字符串切片">1、字符串切片</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>＄<span style="color:#f92672">{</span>变量：偏移量：截取长度｝
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--------------------------example
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>192.168.2.230<span style="color:#f92672">]</span> - root@ubuntu20.04.5-template:/ root
</span></span><span style="display:flex;"><span>$ MYPATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; /usr/bin/wget&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>192.168.2.230］ - root@ubuntu20.04.5-template:/root
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>MYPATH: 4:4<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>/bin     			  <span style="color:#75715e">#其会左向右从第四位向后取四位（字符串第一位为0）</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>192.168.2.230<span style="color:#f92672">]</span> - root@ubuntu20.04.5-template:/ root
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>MYPATH: -4<span style="color:#e6db74">}</span>  <span style="color:#75715e">#这会右向左从末尾向前取四位，「-4和冒号之间要有一个空格」</span>
</span></span></code></pre></div><h2 id="2基于模式取子串">2、基于模式取子串</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#e6db74">${</span>var#*word<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>其中word可以是指定的任意字符，自左而右，删除字符串开头至第一次出现word字符之间的所有字符。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var##*word<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>其中word可以是指定的任意字符，自左而右，删除字符串开头至最后一次出现word字符之间的所有字符。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var%sword*<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>其中word可以是指定的任意字符，自右而左，删除字符串尾部至第一次出现word字符之间的所有字符。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var%%sword*<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>其中word可以是指定的任意字符，自右而左，删除字符串尾部至最后一次出现word字符之间的所有字符
</span></span></code></pre></div><h2 id="3查找删除">3、查找删除</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/匹配文本｝
</span></span><span style="display:flex;"><span>删除第一次匹配到的内容
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var//pattern｝
</span></span><span style="display:flex;"><span>删除所有匹配到的内容
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/#pattern｝
</span></span><span style="display:flex;"><span>删除行首匹配到的内容
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/%pattern｝
</span></span><span style="display:flex;"><span>删除行尾匹配到的内容
</span></span></code></pre></div><h2 id="4查找替换">4、查找替换</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/匹配文本/替换文本｝
</span></span><span style="display:flex;"><span>替换第一次匹配到的内容
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var//匹配文本/替换文本｝
</span></span><span style="display:flex;"><span>替换所有匹配到的内容
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/#匹配文本/替换文本｝
</span></span><span style="display:flex;"><span>行首匹配时替换行首
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">${</span>var/%匹配文本/替换文本｝
</span></span><span style="display:flex;"><span>行尾匹配时替换行尾
</span></span></code></pre></div><hr>
<h1 id="三条件判断语法格式">三、条件判断语法格式</h1>
<ul>
<li>test条件表达式</li>
<li>[ 条件表达式 ]</li>
<li>[[ 条件表达式 ]]</li>
</ul>
<p><strong>特别说明</strong>：</p>
<p>1）[ 亲亲，我两边都有空格，不空会被打死的喔～ ]</p>
<p>2）[[ 亲亲，我两边都有空格，不空会被打死的喔～ ]]</p>
<p>3）更多判断，<code>man test</code>查看，许多的参数都可用来进行条件判断</p>
<h2 id="-和--的区别">[] 和 [[]] 的区别：</h2>
<h3 id="-test-命令"><code>[]</code> （test 命令）</h3>
<p><code>[]</code> 是传统的测试条件的命令，也称为 <code>test</code> 命令。这种语法适用于POSIX标准的Shell，包括sh和bash。</p>
<ul>
<li>
<p><strong>基本语法</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span> condition <span style="color:#f92672">]</span>
</span></span></code></pre></div></li>
<li>
<p><strong>用法和特点</strong>：</p>
<ul>
<li>条件需要用空格分隔。</li>
<li>只支持基本的逻辑和比较操作。</li>
<li>适用于大多数Unix系统。</li>
</ul>
</li>
<li>
<p><strong>示例</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$a<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;</span>$b<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>  echo <span style="color:#e6db74">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="-扩展测试命令"><code>[[]]</code> （扩展测试命令）</h3>
<p><code>[[]]</code> 是Bash特有的扩展测试命令，提供了更强大的功能和更简洁的语法。</p>
<ul>
<li>
<p><strong>基本语法</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[[</span> condition <span style="color:#f92672">]]</span>
</span></span></code></pre></div></li>
<li>
<p><strong>用法和特点</strong>：</p>
<ul>
<li>支持更复杂的条件测试，例如模式匹配（通配符）。</li>
<li>可以直接使用逻辑运算符 <code>&amp;&amp;</code> 和 <code>||</code> 进行复合条件判断。</li>
<li>允许在字符串比较中使用 <code>=~</code> 操作符进行正则表达式匹配。</li>
<li>不需要对条件中的变量进行双引号引用，因为它可以正确处理空字符串和带空格的字符串。</li>
</ul>
</li>
<li>
<p><strong>示例</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $a <span style="color:#f92672">==</span> $b <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>  echo <span style="color:#e6db74">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $a <span style="color:#f92672">=</span>~ ^<span style="color:#f92672">[</span>0-9<span style="color:#f92672">]</span>+$ <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>  echo <span style="color:#e6db74">&#34;a 是一个数字&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="详细对比">详细对比</h3>
<ul>
<li>
<p><strong>字符串比较</strong>：</p>
<ul>
<li><code>[]</code> 使用 <code>=</code> 进行字符串比较，通常需要使用双引号。
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$a<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span>$b<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
</span></span></code></pre></div></li>
<li><code>[[]]</code> 使用 <code>==</code> 进行字符串比较，不需要双引号。
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[[</span> $a <span style="color:#f92672">==</span> $b <span style="color:#f92672">]]</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>逻辑运算</strong>：</p>
<ul>
<li>
<p><code>[]</code> 需要使用 <code>-a</code> (AND) 和 <code>-o</code> (OR)。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$a<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;</span>$b<span style="color:#e6db74">&#34;</span> -a <span style="color:#e6db74">&#34;</span>$c<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;</span>$d<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
</span></span></code></pre></div></li>
<li>
<p><code>[[]]</code> 可以使用 <code>&amp;&amp;</code> 和 <code>||</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[[</span> $a -eq $b <span style="color:#f92672">&amp;&amp;</span> $c -eq $d <span style="color:#f92672">]]</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>正则表达式匹配</strong>：</p>
<ul>
<li>
<p><code>[]</code> 不支持直接的正则表达式匹配。</p>
</li>
<li>
<p><code>[[]]</code> 支持 <code>=~</code> 操作符。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[[</span> $a <span style="color:#f92672">=</span>~ ^<span style="color:#f92672">[</span>0-9<span style="color:#f92672">]</span>+$ <span style="color:#f92672">]]</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>模式匹配</strong>：</p>
<ul>
<li>
<p><code>[]</code> 不支持模式匹配。</p>
</li>
<li>
<p><code>[[]]</code> 支持模式匹配。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[[</span> $a <span style="color:#f92672">==</span> *.txt <span style="color:#f92672">]]</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="总结">总结</h3>
<ul>
<li>使用 <code>[]</code> 更适合于需要兼容POSIX标准的脚本和基本条件测试。</li>
<li>使用 <code>[[]]</code> 提供了更强大和简洁的语法，适合于需要进行复杂条件判断的Bash脚本。</li>
</ul>
<p>在实际编程中，建议在Bash脚本中尽量使用 <code>[[]]</code>，除非需要兼容性考虑，这样可以充分利用其扩展功能和更清晰的语法。</p>
<hr>
<h1 id="四流程控制">四、流程控制</h1>
<h2 id="if-else-语法格式">if else 语法格式</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    command1 
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    command
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><h2 id="if-else-if-else-语法格式">if else-if else 语法格式</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> condition2 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span> 
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>if else 的 [&hellip;] 判断语句中大于使用 -gt，小于使用 -lt，其他用法请参照<strong>运算符</strong>。</p>
<pre tabindex="0"><code>if [ &#34;$a&#34; -gt &#34;$b&#34; ]; then
    ...
fi
</code></pre><p>如果使用((&hellip;)) 作为判断语句，就可以使用类c风格判断，大于和小于可以直接使用 &gt; 和 &lt;。</p>
<pre tabindex="0"><code>if (( a &gt; b )); then
    ...
fi
</code></pre><h2 id="for循环">for循环</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> var in item1 item2 ... itemN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>举个栗子🌰</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> str in This is a string
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    echo $str
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>This
is
a
string
</code></pre><blockquote>
<p>要打印1 -&gt; 10的数字，可以用以下格式</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/zsh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i in <span style="color:#f92672">{</span>1..10<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> 
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;</span>$i<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><blockquote>
<p>或者以下类c风格</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/zsh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span>i<span style="color:#f92672">=</span>1; i&lt;11; i++<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> 
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;</span>$i<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><h2 id="while循环">while循环</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> condition
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    command
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>举个栗子🌰</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>int<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span><span style="color:#f92672">((</span> $int&lt;<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> <span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    echo $int
</span></span><span style="display:flex;"><span>    let <span style="color:#e6db74">&#34;int++&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><h2 id="无限循环">无限循环</h2>
<p>无限循环语法格式：</p>
<pre tabindex="0"><code>while :
do
    command
done
</code></pre><p>或者</p>
<pre tabindex="0"><code>while true
do
    command
done
</code></pre><p>或者</p>
<pre tabindex="0"><code>for (( ; ; ))
</code></pre><hr>
<h2 id="until-循环">until 循环</h2>
<p>until 循环执行一系列命令直至条件为 true 时停止。</p>
<p>until 循环与 while 循环在处理方式上刚好相反。</p>
<p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。</p>
<p>until 语法格式:</p>
<pre tabindex="0"><code>until condition
do
    command
done
</code></pre><p>condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p>
<hr>
<h1 id="五获取当前日期以及时间">五、获取当前日期以及时间</h1>
<p>在 Unix 或 Linux 系统中，<code>date</code> 命令用于显示或设置系统日期和时间。<code>date</code> 命令可以接受多种格式化字符串来指定输出的格式。</p>
<p>命令 <code>date +%M</code> 会返回当前时间中的“分钟”部分。例如，如果当前时间是 14:35，那么运行 <code>date +%M</code> 会输出 <code>35</code>。</p>
<p>下面是一些常用的 <code>date</code> 格式化字符串及其含义：</p>
<ul>
<li><code>%Y</code>：四位数的年份（例如，2023）</li>
<li><code>%m</code>：两位数的月份（例如，05 表示五月）</li>
<li><code>%d</code>：两位数的日期（例如，17）</li>
<li><code>%D</code>：格式化日期（例如2024年五月17日，其会输出05/17/24）</li>
<li><code>%H</code>：两位数的小时（24 小时制，例如，14 表示下午 2 点）</li>
<li><code>%M</code>：两位数的分钟（例如，35）</li>
<li><code>%S</code>：两位数的秒（例如，45）</li>
<li><code>%s</code>：当前时间的Unix时间戳（也称为纪元时间）。Unix时间戳是从1970年1月1日00:00:00 UTC（协调世界时）开始经过的秒数。</li>
</ul>
<p>所以，<code>date +%M</code> 的输出仅仅是当前时间的分钟部分。</p>
<hr>
<h1 id="六传递参数">六、传递参数</h1>
<h2 id="特殊参数">特殊参数</h2>
<p>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为 $n，<strong>n</strong> 代表一个数字，<strong>1</strong> 为执行脚本的第一个参数，<strong>2</strong> 为执行脚本的第二个参数。</p>
<p>例如可以使用 $1、$2 等来引用传递给脚本的参数，其中$1表示第一个参数，$2 表示第二个参数，依此类推。</p>
<p>在<code>#!/bin/zsh</code>脚本中，<code>$#</code>和<code>$0</code>是特定的shell变量，用于脚本参数处理和信息获取。让我们详细解释它们的含义：</p>
<ul>
<li><code>$#</code> 用于表示传递给脚本的参数数量。</li>
<li><code>$0</code> 为执行的文件名（包含文件路径），即脚本自身的文件名。</li>
<li><code>$?</code>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</li>
<li><code>$-</code>显示Shell使用的当前选项，与<a href="https://www.runoob.com/linux/linux-comm-set.html">set命令</a>功能相同。</li>
<li><code>$!</code>后台运行的最后一个进程的ID号</li>
<li><code>$$</code>脚本运行的当前进程ID号</li>
<li><code>$*</code>以一个单字符串显示所有向脚本传递的参数。</li>
<li><code>$@</code>与$*相同，但是使用时加引号，并在引号中返回每个参数。</li>
</ul>
<h2 id="-的含义">$# 的含义</h2>
<p><code>$#</code> 代表传递给脚本的参数数量。在脚本开头，有以下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $# -ne <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Usage: </span>$0<span style="color:#e6db74"> &lt;directory&gt;&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>这段代码的意思是：检查传递给脚本的参数数量是否不等于1。如果不是1个参数（即传递了0个参数或者多于1个参数），则输出使用说明并退出脚本。换句话说，<code>$#</code>用于确保脚本接收正好一个参数。</p>
<h2 id="0-的含义">$0 的含义</h2>
<p><code>$0</code> 代表脚本自身的文件名（包含文件路径）。在脚本中同样的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $# -ne <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Usage: </span>$0<span style="color:#e6db74"> &lt;directory&gt;&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>在这个例子中，<code>$0</code>表示脚本文件的名称。假设脚本的文件名是<code>rename_files.sh</code>，那么当你执行这个脚本时，<code>$0</code>就会被替换为<code>rename_files.sh</code>。因此，输出的使用说明会是：</p>
<pre tabindex="0"><code>Usage: rename_files.sh &lt;directory&gt;
</code></pre><h1 id="常用命令">常用命令</h1>
<h2 id="find命令">find命令</h2>
<p>语法</p>
<pre tabindex="0"><code>find [路径] [匹配条件] [动作]
</code></pre><p>参数说明 :
<strong>路径</strong> 是要查找的目录路径，可以是一个目录或文件名，也可以是多个路径，多个路径之间用空格分隔，如果未指定路径，则默认为当前目录。</p>
<p>expression 是可选参数，用于指定查找的条件，可以是文件名、文件类型、文件大小等等。
匹配条件 中可使用的选项有二三十个之多，以下列出最常用的部份：</p>
<ul>
<li>-name pattern：按文件名查找，支持使用通配符 * 和 ?。</li>
<li>-type type：按文件类型查找，可以是 f（普通文件）、d（目录）、l（符号链接）等。</li>
<li>-size [+-]size[cwbkMG]：按文件大小查找，支持使用 + 或 - 表示大于或小于指定大小，单位可以是 c（字节）、w（字数）、b（块数）、k（KB）、M（MB）或 G（GB）。</li>
<li>-mtime days：按修改时间查找，支持使用 + 或 - 表示在指定天数前或后，days 是一个整数表示天数。</li>
<li>-user username：按文件所有者查找。</li>
<li>-group groupname：按文件所属组查找。</li>
</ul>
<p>动作: 可选的，用于对匹配到的文件执行操作，比如删除、复制等。</p>
<p>find 命令中用于时间的参数如下：</p>
<ul>
<li>-amin n：查找在 n 分钟内被访问过的文件。</li>
<li>-atime n：查找在 n*24 小时内被访问过的文件。</li>
<li>-cmin n：查找在 n 分钟内状态发生变化的文件（例如权限）。</li>
<li>-ctime n：查找在 n*24 小时内状态发生变化的文件（例如权限）。</li>
<li>-mmin n：查找在 n 分钟内被修改过的文件。</li>
<li>-mtime n：查找在 n*24 小时内被修改过的文件。<br>
在这些参数中，n 可以是一个正数、负数或零。正数表示在指定的时间内修改或访问过的文件，负数表示在指定的时间之前修改或访问过的文件，零表示在当前时间点上修改或访问过的文件。</li>
</ul>
<p>正数应该表示时间之前，负数表示时间之内。
例如：-mtime 0 表示查找今天修改过的文件，-mtime -7 表示查找一周以前修改过的文件。</p>
<p>关于时间 n 参数的说明：</p>
<ul>
<li>+n：查找比 n 天前更早的文件或目录。</li>
<li>-n：查找在 n 天内更改过属性的文件或目录。</li>
<li>n：查找在 n 天前（指定那一天）更改过属性的文件或目录。</li>
</ul>
<h3 id="实例">实例</h3>
<p>查找当前目录下名为 file.txt 的文件：</p>
<pre tabindex="0"><code>find . -name file.txt
</code></pre><p>将当前目录及其子目录下所有文件后缀为 .c 的文件列出来:</p>
<pre tabindex="0"><code>find . -name &#34;*.c&#34;
</code></pre><p>将当前目录及其子目录中的所有文件列出：</p>
<pre tabindex="0"><code>find . -type f
</code></pre><p>如果后面的参数过多，可以用()括起来，但是注意使用 <code>\</code> 转义符，以下命令的含义是找出当前目录以及子目录所有的.md和.txt文件</p>
<pre tabindex="0"><code>find . -type f \( -name &#34;*.md&#34; -o -name &#34;*.txt&#34; \)
</code></pre><h2 id="read命令">read命令</h2>
<p>read 内部命令被用来从标准输入读取单行数据。这个命令可以用来读取键盘输入，当使用重定向的时候，可以读取文件中的一行数据。</p>
<p>语法</p>
<pre tabindex="0"><code>read [-ers] [-a aname] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t timeout] [-u fd] [name ...]
</code></pre><p>参数说明:</p>
<ul>
<li>-a 后跟一个变量，该变量会被认为是个数组，然后给其赋值，默认是以空格为分割符。</li>
<li>-d 后面跟一个标志符，其实只有其后的第一个字符有用，作为结束的标志。</li>
<li>-p 后面跟提示信息，即在输入前打印提示信息。</li>
<li>-e 在输入的时候可以使用命令补全功能。</li>
<li>-n 后跟一个数字，定义输入文本的长度，很实用。</li>
<li>-r 屏蔽\，如果没有该选项，则\作为一个转义字符，有的话 \就是个正常的字符了。</li>
<li>-s 安静模式，在输入字符时不再屏幕上显示，例如login时输入密码。</li>
<li>-t 后面跟秒数，定义输入字符的等待时间。</li>
<li>-u 后面跟fd，从文件描述符中读入，该文件描述符可以是exec新开启的。</li>
</ul>
<h3 id="实例-1">实例</h3>
<p>1、简单读取</p>
<pre tabindex="0"><code>#!/bin/bash

#这里默认会换行  
echo &#34;输入网站名: &#34;  
#读取从键盘的输入  
read website  
echo &#34;你输入的网站名是 $website&#34;  
exit 0  #退出
</code></pre><p>测试结果为：</p>
<pre tabindex="0"><code>输入网站名: 
www.runoob.com
你输入的网站名是 www.runoob.com
</code></pre><p>2、-p 参数，允许在 read 命令行中直接指定一个提示。</p>
<pre tabindex="0"><code>#!/bin/bash

read -p &#34;输入网站名:&#34; website
echo &#34;你输入的网站名是 $website&#34; 
exit 0
</code></pre><p>测试结果为：</p>
<pre tabindex="0"><code>输入网站名:www.runoob.com
你输入的网站名是 www.runoob.com
</code></pre><p>3、-t 参数指定 read 命令等待输入的秒数，当计时满时，read命令返回一个非零退出状态。</p>
<pre tabindex="0"><code>#!/bin/bash

if read -t 5 -p &#34;输入网站名:&#34; website
then
    echo &#34;你输入的网站名是 $website&#34;
else
    echo &#34;\n抱歉，你输入超时了。&#34;
fi
exit 0
</code></pre><p>执行程序不输入，等待 5 秒后：</p>
<pre tabindex="0"><code>输入网站名:
抱歉，你输入超时了
</code></pre><p>4、除了输入时间计时，还可以使用 -n 参数设置 read 命令计数输入的字符。当输入的字符数目达到预定数目时，自动退出，并将输入的数据赋值给变量。</p>
<pre tabindex="0"><code>#!/bin/bash

read -n1 -p &#34;Do you want to continue [Y/N]?&#34; answer
case $answer in
Y | y)
      echo &#34;fine ,continue&#34;;;
N | n)
      echo &#34;ok,good bye&#34;;;
*)
     echo &#34;error choice&#34;;;

esac
exit 0
</code></pre><p>该例子使用了-n 选项，后接数值 1，指示 read 命令只要接受到一个字符就退出。只要按下一个字符进行回答，read 命令立即接受输入并将其传给变量，无需按回车键。</p>
<p>只接收 2 个输入就退出：</p>
<pre tabindex="0"><code>#!/bin/bash

read -n2 -p &#34;请随便输入两个字符: &#34; any
echo &#34;\n您输入的两个字符是:$any&#34;
exit 0
</code></pre><p>执行程序输入两个字符：</p>
<pre tabindex="0"><code>请随便输入两个字符: 12
您输入的两个字符是:12
</code></pre><p>5、-s 选项能够使 read 命令中输入的数据不显示在命令终端上（实际上，数据是显示的，只是 read 命令将文本颜色设置成与背景相同的颜色）。输入密码常用这个选项。</p>
<pre tabindex="0"><code>#!/bin/bash

read  -s  -p &#34;请输入您的密码:&#34; pass
echo &#34;\n您输入的密码是 $pass&#34;
exit 0
</code></pre><p>执行程序输入密码后是不显示的：</p>
<pre tabindex="0"><code>请输入您的密码:
您输入的密码是 runoob
</code></pre><p>6.读取文件
每次调用 read 命令都会读取文件中的 &ldquo;一行&rdquo; 文本。当文件没有可读的行时，read 命令将以非零状态退出。
通过什么样的方法将文件中的数据传给 read 呢？使用 cat 命令并通过管道将结果直接传送给包含 read 命令的 while 命令。
测试文件 test.txt 内容如下：</p>
<pre tabindex="0"><code>123
456
runoob
</code></pre><p>测试代码：</p>
<pre tabindex="0"><code>#!/bin/bash
  
count=1    # 赋值语句，不加空格
cat test.txt | while read line      # cat 命令的输出作为read命令的输入,read读到&gt;的值放在line中
do
   echo &#34;Line $count:$line&#34;
   count=$[ $count + 1 ]          # 注意中括号中的空格。
done
echo &#34;finish&#34;
exit 0
</code></pre><p>执行结果为：</p>
<pre tabindex="0"><code>Line 1:123
Line 2:456
Line 3:runoob
finish
</code></pre><p>使用 -e 参数，以下实例输入字符 a 后按下 Tab 键就会输出相关的文件名(该目录存在的)：</p>
<pre tabindex="0"><code>$ read -e -p &#34;输入文件名:&#34; str 
输入文件名:a
a.out    a.py     a.pyc    abc.txt  
输入文件名:a
</code></pre>
    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            
            

            

            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/pyinstaller%E5%B0%86python%E5%BA%94%E7%94%A8%E6%89%93%E5%8C%85%E4%B8%BAandroid%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">PyInstaller将Python应用打包为Android应用程序</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/gmeek%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC%E5%8D%95%E7%AF%87%E6%88%96%E6%89%B9%E9%87%8F/">「Gmeek」上传脚本(单篇或批量)</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/platformioprintf-%E9%87%8D%E6%98%A0%E5%83%8F%E4%B8%B2%E5%8F%A3%E6%89%93%E5%8D%B0%E6%95%B0%E6%8D%AE/">「platformIO」printf 重映像、串口打印数据</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/python%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/">「Python」模块和包</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/pythonconda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/">「python」Conda虚拟环境</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/python%E4%B8%80%E4%B8%AA%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90requirements.txt%E7%9A%84%E5%BA%93/">「python」一个快速生成requirements.txt的库</a>
                    </li>
                
                    <li>
                        <a href="https://blog.ronan.us.kg/posts/orbstackmac-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%BF%AB%E7%9A%84-docker-%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7%E5%8F%AF%E5%AE%8C%E5%85%A8%E6%9B%BF%E4%BB%A3-docker-desktop/">「OrbStack」Mac 系统中一个更快的 Docker 可视化工具，可完全替代 Docker Desktop</a>
                    </li>
                
            </ul>
        </div>
        

        
        <div class="categories">
            
            <a href="https://blog.ronan.us.kg/categories/"><strong>Categories</strong></a>
            

            <ul>
                
                <li>
                
                    <a href="https://blog.ronan.us.kg/categories/docs/">Docs (38)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.ronan.us.kg/categories/linux/">Linux (11)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.ronan.us.kg/categories/macos/">Macos (5)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.ronan.us.kg/categories/tools/">Tools (5)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.ronan.us.kg/categories/vscode/">Vscode (4)</a>
                
                </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>
                
                <a href="https://weibo.com/u/5995159469" target="_blank" rel="me"><em class="fab fa-weibo"></em></a>
                
                <a href="https://github.com/EchoZap" target="_blank" rel=""><em class="fab fa-github"></em></a>
                
            </div>
            

            

            
            <div class="archive">
                
                <a href="https://blog.ronan.us.kg/archive/"><strong>Archive</strong></a>
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/echozap" target="_blank">
                &copy;
                
                2024
                
                by Ronan
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    

    

    


    

    

    

    

    

    

    

    



    
    
    



    
    







    
    <script src="https://blog.ronan.us.kg/theme.min.15a051027515397e36946f37800e8a370e44f72ac97de37ae55b55087e3b0b59.js" integrity="sha256-FaBRAnUVOX42lG83gA6KNw5E9yrJfeN65VtVCH47C1k=" crossorigin="anonymous"></script>



    



    
        <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="GT5UPRMBE6">
  <input type="hidden" id="algolia-search-apiKey" value="9499608ea45258a283445ca59ad50c14">
  <input type="hidden" id="algolia-search-indexName" value="hugo">
  <input type="hidden" id="algolia-search-noSearchResults" value="Nothing found.">

  
  <input type="hidden" id="algolia-search-currentLanguageOnly">
  
</div>

    

    
</body>

</html>
